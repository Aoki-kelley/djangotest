<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Welcome!</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
          crossorigin="anonymous">
</head>
<body>
<!--导航栏-->
{% if is_login %}
    <p style="text-align:right">
        <a href="/user/logout/">登出</a>
        <a href="/user/mine/">我的</a>
        <img src="{{ image.url }}" alt="无法显示" height="48" width="48"/>
    </p>
    <form name="SearchGoods" method="post" action="/trade/search/"
          enctype="multipart/form-data">
        {% csrf_token %}
        <p style="text-align: center">
            按标签搜索
            {{ form.label }}
            <button type="submit">确定</button>
        </p>
    </form>
{% else %}
    <p style="text-align:right">
        <a href="/user/login/">登录或注册</a>
        <br/>
    </p>
    <p style="text-align: center;color: coral">登录后可查看和查找商品</p>
{% endif %}
<!--商品展示-->
<table align="center" class="table table-striped table-bordered table-hover">
    <thead>
    <tr>
        <td>图片</td>
        <td>商品名</td>
        <td>标签</td>
        <td>单价</td>
        <td>库存</td>
        <td></td>
    </tr>
    </thead>
    <tbody>
    {% for goods in page_goods %}
        {% if goods.status == 'on' %}
            <tr>
                <td><img src="{{ goods.image.url }}" alt="无法显示" height="100" width="61.8"/></td>
                <td>{{ goods.title }}</td>
                <td>{{ goods.label }}</td>
                <td>{{ goods.price }}</td>
                <td>{{ goods.amount }}</td>
                <td><a href="/trade/goods_detail/{{ goods.id }}/">查看</a></td>

            </tr>
        {% endif %}
    {% endfor %}
    </tbody>
</table>
<ul id="pager">
    {#上一页按钮开始#}
    {# 如果当前页有上一页#}
    {% if page_goods.has_previous %}
        {#  当前页的上一页按钮正常使用#}
        <li class="previous"><a href="/?page={{ page_goods.previous_page_number }}">上一页</a></li>
    {% else %}
        {# 当前页的不存在上一页时,上一页的按钮不可用#}
        <li class="previous disabled"><a href="#">上一页</a></li>
    {% endif %}
    {#上一页按钮结束#}
    {# 页码开始#}
    {% for num in paginator.page_range %}
        {% if num == now_page %}
            <li class="item active"><a href="/?page={{ num }}">{{ num }}</a></li>
        {% else %}
            <li class="item"><a href="/?page={{ num }}">{{ num }}</a></li>
        {% endif %}
    {% endfor %}
    {#页码结束#}
    {# 下一页按钮开始#}
    {% if page_goods.has_next %}
        <li class="next"><a href="/?page={{ page_goods.next_page_number }}">下一页</a></li>
    {% else %}
        <li class="next disabled"><a href="#">下一页</a></li>
    {% endif %}
    {# 下一页按钮结束#}
</ul>
</body>
</html>